# ğŸš€ å®Œæ•´éƒ¨ç½²æ­¥éª¤ - ç¡®ä¿æˆåŠŸ

## æœåŠ¡å™¨ä¿¡æ¯
- IP: 182.92.59.70
- ç”¨æˆ·: root
- å¯†ç : ryg@893012
- å‰ç«¯ç«¯å£: 3004
- åç«¯ç«¯å£: 3002

---

## ç¬¬ä¸€æ­¥ï¼šæœ¬åœ°æ‰“åŒ…ï¼ˆå·²å®Œæˆ âœ…ï¼‰

å‰ç«¯å·²æ‰“åŒ…å®Œæˆï¼Œæ–‡ä»¶åœ¨ `dist/` ç›®å½•

---

## ç¬¬äºŒæ­¥ï¼šè¿æ¥æœåŠ¡å™¨

```bash
ssh root@182.92.59.70
# è¾“å…¥å¯†ç : ryg@893012
```

---

## ç¬¬ä¸‰æ­¥ï¼šåœ¨æœåŠ¡å™¨ä¸Šé…ç½®ç¯å¢ƒ

**å¤åˆ¶ä»¥ä¸‹æ‰€æœ‰å‘½ä»¤ï¼Œä¸€æ¬¡æ€§æ‰§è¡Œï¼š**

```bash
# ===== å®‰è£…Node.js =====
curl -fsSL https://rpm.nodesource.com/setup_18.x | bash -
yum install -y nodejs
node -v

# ===== å®‰è£…PM2å’Œserve =====
npm install -g pm2 serve

# ===== å®‰è£…å¹¶å¯åŠ¨MongoDB =====
docker run -d --name mongodb -p 27017:27017 --restart=always mongo:latest || docker start mongodb
sleep 3
docker ps | grep mongo

# ===== åˆ›å»ºéƒ¨ç½²ç›®å½• =====
mkdir -p /opt/wladmin/{frontend,backend,logs}

# ===== é…ç½®é˜²ç«å¢™ =====
firewall-cmd --permanent --add-port=3004/tcp
firewall-cmd --permanent --add-port=3002/tcp
firewall-cmd --reload

echo "âœ… ç¯å¢ƒé…ç½®å®Œæˆï¼"
```

---

## ç¬¬å››æ­¥ï¼šä¸Šä¼ æ–‡ä»¶ï¼ˆåœ¨æœ¬åœ°æ–°ç»ˆç«¯æ‰§è¡Œï¼‰

**æ‰“å¼€æ–°çš„ç»ˆç«¯çª—å£ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š**

```bash
cd /Users/liudong/Desktop/myGitProgect/wladmin

# ä¸Šä¼ å‰ç«¯æ–‡ä»¶
scp -r dist/* root@182.92.59.70:/opt/wladmin/frontend/

# ä¸Šä¼ åç«¯æ–‡ä»¶
scp -r server/* root@182.92.59.70:/opt/wladmin/backend/

# ä¸Šä¼ PM2é…ç½®æ–‡ä»¶
scp deploy/ecosystem.config.js root@182.92.59.70:/opt/wladmin/
```

**æ¯æ¬¡ä¸Šä¼ ä¼šè¦æ±‚è¾“å…¥å¯†ç ï¼š`ryg@893012`**

---

## ç¬¬äº”æ­¥ï¼šåœ¨æœåŠ¡å™¨ä¸Šå¯åŠ¨æœåŠ¡

**å›åˆ°æœåŠ¡å™¨SSHä¼šè¯ï¼Œæ‰§è¡Œï¼š**

```bash
# å®‰è£…åç«¯ä¾èµ–
cd /opt/wladmin/backend
npm install --production

# å¯åŠ¨æœåŠ¡
cd /opt/wladmin
pm2 start ecosystem.config.js

# ä¿å­˜PM2é…ç½®
pm2 save

# è®¾ç½®å¼€æœºè‡ªå¯
pm2 startup
# æ‰§è¡Œä¸Šé¢å‘½ä»¤è¾“å‡ºçš„sudoå‘½ä»¤ï¼ˆå¦‚æœæœ‰ï¼‰

# æ£€æŸ¥æœåŠ¡çŠ¶æ€
pm2 list

# æ£€æŸ¥ç«¯å£
netstat -tlnp | grep -E "3004|3002"
```

---

## ç¬¬å…­æ­¥ï¼šé…ç½®é˜¿é‡Œäº‘å®‰å…¨ç»„

1. ç™»å½•é˜¿é‡Œäº‘æ§åˆ¶å°
2. è¿›å…¥ **ECS** -> **å®ä¾‹** -> é€‰æ‹©æœåŠ¡å™¨
3. ç‚¹å‡» **å®‰å…¨ç»„** -> **é…ç½®è§„åˆ™**
4. ç‚¹å‡» **æ·»åŠ å®‰å…¨ç»„è§„åˆ™**
5. æ·»åŠ ä¸¤æ¡è§„åˆ™ï¼š
   - **è§„åˆ™1**: ç«¯å£3004ï¼Œåè®®TCPï¼Œæˆæƒå¯¹è±¡0.0.0.0/0
   - **è§„åˆ™2**: ç«¯å£3002ï¼Œåè®®TCPï¼Œæˆæƒå¯¹è±¡0.0.0.0/0

---

## ç¬¬ä¸ƒæ­¥ï¼šéªŒè¯éƒ¨ç½²

è®¿é—®ï¼š**http://182.92.59.70:3004**

å¦‚æœæ— æ³•è®¿é—®ï¼Œæ£€æŸ¥ï¼š

```bash
# åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œ
pm2 logs          # æŸ¥çœ‹æ—¥å¿—
pm2 list          # æŸ¥çœ‹æœåŠ¡çŠ¶æ€
netstat -tlnp | grep -E "3004|3002"  # æ£€æŸ¥ç«¯å£
```

---

## å¦‚æœé‡åˆ°502é”™è¯¯

æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ä¿®å¤ï¼š

```bash
# åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œ
cd /opt/wladmin

# åœæ­¢æ‰€æœ‰æœåŠ¡
pm2 delete all

# é‡æ–°å¯åŠ¨
pm2 start ecosystem.config.js

# å¦‚æœé…ç½®æ–‡ä»¶ä¸å­˜åœ¨ï¼Œæ‰‹åŠ¨å¯åŠ¨
cd backend
PORT=3002 pm2 start index.js --name wladmin-api
cd ..
pm2 start "serve -s frontend -l 3004" --name wladmin-frontend

pm2 save
pm2 list
```

---

## å®Œæˆï¼

éƒ¨ç½²æˆåŠŸåè®¿é—®ï¼š**http://182.92.59.70:3004**

é»˜è®¤ç™»å½•è´¦å·ï¼š
- ç”¨æˆ·å: admin
- å¯†ç : 123456
